# =========================================================================
# This file is part of CODA
# =========================================================================
# 
# (C) Copyright 2004 - 2009, General Dynamics - Advanced Information Systems
#
# CODA is free software; you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public 
# License along with this program; If not, 
# see <http://www.gnu.org/licenses/>.
#


#----------------------------------------
# Project specific
#----------------------------------------
include ../build/project.make

TARGET = @target@
LANGUAGE = c++
#----------------------------------------
# Compile flags
#----------------------------------------
CXX = @purify@ @CXX@
CXXDEFINES = @cxx_defs@ $(MY_CXXDEFINES)
CXXFLAGS = @cxx_flags@ $(MY_CXXFLAGS)

#----------------------------------------
# Library flags
#----------------------------------------
ARCHIVE = @AR@ @ar_flags@
ARCHNAME = $(PACKAGE)-$(LANGUAGE)
LIBNAME = lib$(ARCHNAME).a
LIBDIR = ../lib/$(TARGET)/@lib_dir@
DSONAME = lib$(ARCHNAME).so
LIBS = -l$(ARCHNAME) $(MY_LIBS) @link_libs@ 

#----------------------------------------
# Link
#----------------------------------------
LIBPATH = -L$(LIBDIR) $(MY_LIBPATH) @link_libpath@
LINK = $(LIBPATH) $(LFLAGS) $(LIBS)
LFLAGS = @link_flags@ $(MY_LFLAGS)
#----------------------------------------
# DSO flags
#----------------------------------------
DLLFLAGS = @dll_flags@
DSODIR = ../plugins/$(TARGET)/@lib_dir@
DSO    = ${PLUGINS:.cpp=.so}

#----------------------------------------
# Test flags
#----------------------------------------
TESTDIR = ../bin/$(TARGET)

#----------------------------------------
# Misc.
#----------------------------------------
DSOEXT  = .so
LIBEXT  = .a


#----------------------------------------
# This section automatically puts 
# together your dependencies
#----------------------------------------
HAVE_MODULES = @have_modules@
MY_INCLUDE_PREFIX = -I@top_srcdir@/
MY_INCLUDE_SUFFIX = /include
MY_LIBPATH_PREFIX = -L@top_srcdir@/
MY_LIBPATH_SUFFIX = /lib/@target@/@lib_dir@

#ifneq "$(HAVE_MODULES)" "yes"
#MY_INCLUDES = $(foreach depend, $(MY_DEPENDS), $(MY_INCLUDE_PREFIX)$(depend)$(MY_INCLUDE_SUFFIX))
#MY_LIBPATH = $(foreach depend, $(MY_DEPENDS), $(MY_LIBPATH_PREFIX)$(depend)$(MY_LIBPATH_SUFFIX))
#MY_LIBS =  $(foreach depend, $(MY_DEPENDS), -l$(depend)-$(LANGUAGE))
#endif

INCLUDES = -I../include @cxx_includes@ $(MY_INCLUDES)
COMPILE = $(CXX) $(CXXFLAGS) $(CXXDEFINES) $(INCLUDES)
